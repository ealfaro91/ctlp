<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- TICKET REGISTRATION FORM -->

    <template id="ticket_form" name="Register Your Requirement">
        <t t-call="website.layout">
            <div class="card shadow-sm d-flex justify-content-center align-items-center vh-100" style="border: none;background-color: #f0f8ff;">
                <form action="/help_desk_close" method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="card shadow-lg mx-auto" style="max-width: 800px; border: none;">
                        <div class="card-header text-center bg-primary text-white">
                            <h3 class="font-weight-bold">Register Your Requirement</h3>
                        </div>
                        <div class="card-body">
                            <t t-if="error_message">
                                <div class="alert alert-danger text-center" role="alert">
                                    <span t-esc="error_message"/>
                                </div>
                            </t>
                            <!-- Requester Name Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <label for="name" class="form-label">Requester</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-user"></i>
                                        </span>
                                        <input type="text" class="form-control" name="name" required="required" t-att-value="user.name" readonly="readonly"/>
                                    </div>
                                </div>
                                <!-- Requester Area Field with Icon -->
                                <div class="col-md-6">
                                    <label for="area" class="form-label">Requester Area</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-building"></i>
                                        </span>
                                        <input type="text" class="form-control" name="area" required="required" t-att-value="user.area" readonly="readonly"/>
                                    </div>
                                </div>
                            </div>
                            <!-- Requirement Area Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="area_id" class="form-label">Requirement Area</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-briefcase"></i>
                                        </span>
                                        <select class="form-control" name="area_id">
                                            <option value=""></option>
                                            <t t-foreach="areas" t-as="area">
                                                <option t-att-value="area.id" t-att-data-area_code="area.code">
                                                    <t t-esc="area.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- Request Type Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="type_id" class="form-label">Request Type</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-tasks"></i>
                                        </span>
                                        <select class="form-control" name="type_id">
                                            <option value=""></option>
                                            <t t-foreach="types" t-as="type">
                                                <option t-att-value="type.id" t-att-data-area_id="type.area_id.id">
                                                    <t t-esc="type.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- Category Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="category_id" class="form-label">Category</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-list-alt"></i>
                                        </span>
                                        <select class="form-control" name="category_id">
                                            <option value=""/>
                                            <t t-foreach="categories" t-as="category">
                                                <option t-att-value="category.id" t-att-data-type_id="category.type_id.id">
                                                    <t t-esc="category.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- Conditionally Display Location Field -->
                            <div class="row mb-4"  id="location_field" style="display: none;" onchange="toggleLocationField()">
                                <div class="col-md-12">
                                    <label for="location_id" class="form-label">Location</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-map-marker"></i>
                                        </span>
                                        <select class="form-control" name="location_id">
                                            <option value=""></option>
                                            <t t-foreach="locations" t-as="location">
                                                <option t-att-value="location.id" t-att-data-category_id="location.category_id.id">
                                                    <t t-esc="location.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <!-- Attachments Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="attachments" class="form-label">Attachment(s)</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-paperclip"></i>
                                        </span>
                                        <input type="file" class="form-control" name="attachments" multiple="true" onchange="showFileNames()"/>
                                        <div id="fileList" class="mt-2"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- Title Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="title" class="form-label">Title</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-tag"></i>
                                        </span>
                                        <input type="text" class="form-control" name="title" required="required"/>
                                    </div>
                                </div>
                            </div>
                            <!-- Request Description Field with Icon -->
                            <div class="row mb-4">
                                <div class="col-md-12">
                                    <label for="description" class="form-label">Request Description</label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fa fa-pencil"></i>
                                        </span>
                                        <textarea class="form-control" name="description" required="required"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 text-center">
                                    <button type="submit" class="btn btn-primary btn-lg" style="box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.15);">
                                        <i class="fa fa-paper-plane"></i> Submit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </t>
    </template>

    <template id="reopen_close_ticket_form" name="Motivo de reapertura">
        <t t-call="website.layout">
            <div class="container mt-4 mb-4">
                <h1>Reopen ticket reason</h1><br/>
                <t t-if="error_message">
                    <span class="text-danger" t-esc="error_message"/>
                </t>
                <form action="/help_desk_reopen" method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="csrf_token"/>
                    <input type="hidden" name="id" t-att-value="id"/>
                    <div class="row mb-3">
                        <label for="description" class="col-md-2 col-form-label">Reason</label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="reopen_reason" required="required"></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 text-center">
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </t>
    </template>


    <!-- CLOSE TICKET -->

    <template id="close_ticket_form" name="Motivo de reapertura">
        <t t-call="website.layout">
            <section>
                <div class="container mt-5">
                    <div class="row">
                        <div class="col-12">
                            <h1 class="text-center">
                                <i class="fa fa-check-circle fa-1x text-success" role="img" aria-label="Success" title="Success"/>
                            </h1>
                        </div>
                        <br/>
                        <div class="col-12">
                            <h1 class="text-center">
                                Your ticket "<span t-esc="number"/>" with subject "<span t-esc="name"/>" has been closed successfully.
                            </h1>
                        </div>
                    </div>
                </div>
            </section>
        </t>
    </template>

    <!-- TICKET REGISTRATION CONFIRMATION -->

    <template id="ticket_register" name="Your Request Has Been Registered">
        <t t-call="website.layout">
            <div>
                <div class="container">
                    <input type="hidden" name="csrf_token" t-att-value="csrf_token"/>
                    <!-- Error Message -->
                    <t t-if="error_message">
                        <div class="alert alert-danger text-center" role="alert" style="padding: 20px; font-size: 1.2rem; font-weight: 500;">
                            <i class="fa fa-exclamation-circle" style="font-size: 1.5rem; margin-right: 10px; color: #dc3545;"></i>
                            <span t-esc="error_message"/>
                        </div>
                    </t>
                    <!-- Success Message -->
                    <t t-else="">
                        <!-- Upper Green Section with Checkmark -->
                        <div style="background-color: #28a745; padding: 30px 0; text-align: center;">
                            <i class="fa fa-check-circle" style="font-size: 3rem; color: white;"></i>
                        </div>
                        <!-- Main Card -->
                        <div class="card shadow-sm mx-auto" style="max-width: 600px; border: none; margin-top: -30px; border-radius: 10px 10px 10px 10px; overflow: hidden;">
                            <h1 style="font-size: 1.75rem; font-weight: bold; color: #555; margin-top: 20px; text-align: center;">
                                Request Registered Successfully!
                            </h1>
                            <p style="font-size: 1rem; color: #555; margin:5%; line-height: 1.6; text-align: center;">
                                Thank you for reaching out. Your request has been received and our team will start working on it soon.
                            </p>
                            <!-- Display Ticket Number if available -->
                            <t t-if="not hide_number">
                                <p style="font-size: 1.25rem; font-weight: bold; color: #666; margin-top: 20px; text-align: center;">
                                    Your ticket number is:
                                    <span>
                                        <b><span t-esc="number"/></b>
                                    </span>
                                </p>
                            </t>
                            <!-- Action Button -->
                            <div class="mt-4 text-center">
                                <a href="/my_tickets" class="btn btn-primary btn-lg mt-3" style="border: none; box-shadow: 0 2px 10px rgba(0, 123, 255, 0.5); margin-bottom:10%;">
                                    View My Tickets
                                </a>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>

<!--    &lt;!&ndash; TICKET REGISTRATION CONFIRMATION &ndash;&gt;-->

<!--    <template inherit_id="helpdesk_mgmt.portal_ticket_list" id="portal_ticket_list" name="Ticket List">-->
<!--        <xpath expr="//thead/tr/th[id='title']" position="after">-->
<!--            <th>Area</th>-->
<!--        </xpath>-->
<!--&lt;!&ndash;        <xpath expr="//td[span[@t-esc='ticket.category_id.name']]" position="before">&ndash;&gt;-->
<!--&lt;!&ndash;            <td><span t-esc="ticket.area_id.name"/></td>&ndash;&gt;-->
<!--&lt;!&ndash;        </xpath>&ndash;&gt;-->
<!--    </template>-->

</odoo>
